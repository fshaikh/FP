var FP=FP||{};!function(a){"use strict";var b={},c=null,d="constructorProxy",e="get",f="set",g="apply",h="0.1.0",i=function(){return c?c:c="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global},j=function(a,b,c){var d;return d=c?l(a,b.extend):k(a),d.prototype._className=a,b&&b.config&&z(d.prototype,b.config),d},k=function(a){var b=function(a){z(this,a),m(this,a)};return b},l=function(a,b){var c=n(b);if(c){var d=function(b){c.data.ctor.call(this,b),this._className=a,this.base=F(F(this))};return d.prototype=G(c),d}},m=function(a,b){a[d]&&a[d].call(a,b)},n=function(a){var c=b[a];return c},o=function(a){b[a.className]=a},p=function(a,b){y(a.prototype,b),b&&b.config&&B(a.prototype,b.config),E(a.prototype)},q=function(a,b,c){var d=c?c.static:null;d&&(r(b,d),s(b,d))},r=function(a,b){z(a,b)},s=function(a,b){y(a,b)},t=function(a,b){if(b&&b.mixin)for(var c=b.mixin,d=c.length,e=0;e<d;e++)u(c[e],a.prototype)},u=function(a,b){var c=n(a);if(c){var d=c.data.options;for(var e in d)d.hasOwnProperty(e)&&(b[e]=d[e])}},v=function(a,b){b&&b.singleton&&b.singleton!==!1&&w(a,b)},w=function(a,b){a.instance=null,a.getInstance=function(b){a.instance;return a.instance?a.instance:(a.instance=x(a,b),a.instance)}},x=function(a,b){return new a(b)},y=function(a,b){for(var c in b)b.hasOwnProperty(c)&&"function"==typeof b[c]&&("constructor"===c?a[d]=b[c]:a[c]=b[c])},z=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},A=function(a,c){var d=b[c.extend];return!d||!(!d.data.options||!d.data.options.sealed)},B=function(a,b){if(b&&"object"==typeof b)for(var c in b)if(b.hasOwnProperty(c)){var d=c;d=d.replace(d.charAt(0),d.charAt(0).toLocaleUpperCase());var g=e+d;a[g]=C(c);var h=f+d;a[h]=D(c,d),B(a,b[c])}},C=function(a){return function(){return this[a]}},D=function(a,b){return function(c){var d=c,e=g+b;this[e]&&(d=this[e].call(this,c)),this[a]="undefined"==typeof d?this[a]:d}},E=function(a){a.has=function(a){return null!==a&&void 0!==a&&!!this.hasOwnProperty(a)}},F=function(a){var b;return b="undefined"!=typeof Object.getPrototypeOf?Object.getPrototypeOf(a):a.__proto__},G=function(a){var b;return b="undefined"==typeof Object.create?new a.data.ctor:Object.create(a.data.ctor.prototype)},H=function(a,b){var c=j(a,b,!1);r(c,b.config),s(c,b),L(a,c,b),N(a,b,c)},I=function(a,b,c){if(c&&c.overload){var d=c.overload;J(d,a,b.prototype)}},J=function(a,b,c){for(var d=0;d<a.length;d++)for(var e=a[d],f=e.name,g=e.functions,h=g.length,i=0;i<h;i++)K(c,f,g[i])},K=function(a,b,c){var d=a[b];a[b]=function(){return c.length===arguments.length?c.apply(this,arguments):"function"==typeof d?d.apply(this,arguments):void 0}},L=function(a,b,c){var d=M(a,b,c);o(d)},M=function(a,b,c){return{className:a,data:{ctor:b,options:c}}},N=function(a,b,c){var d=a.indexOf(".")!==-1;if(!d)return void(i()[a]=c);for(var e=a.split("."),f=e.length,g=i(),h=g,j=0;j<f;j++){var k=e[j];h[k]||(h[k]=j===f-1?c:{}),h=h[k]}};a.define=function(a,b){var c=!!b&&!!b.staticClass;if(c)return void H(a,b);var d=!!b&&!!b.extend;if(d&&A(a,b))throw"Parent object is marked as sealed.";var e=j(a,b,d);p(e,b),I(a,e,b),q(a,e,b),t(e,b),v(e,b),L(a,e,b),N(a,b,e)},a.create=function(a,b){var c=n(a);return c?c.data.options&&c.data.options.singleton&&c.data.options.singleton!==!1?c.data.ctor.getInstance(b):x(c.data.ctor,b):null},a.getClasses=function(){return b},a.setGlobalScope=function(a){c=a},a.VERSION=h,FP.define("FP.Util",{staticClass:!0,isNaN:function(a){return"number"==typeof a&&a!==a},isInteger:function(a){return Number.isInteger?Number.isInteger(a):null!==a&&void 0!==a&&("number"==typeof a&&a%1===0)},isObject:function(a){return null!==a&&void 0!==a&&"[object Object]"===toString.call(a)}}),FP.define("FP.LRUCache.Node",{config:{key:{},value:{},previous:null,next:null}}),FP.define("FP.LRUCache",{config:{nodeEntries:{},capacity:5,head:null,tail:null,currentNodeCount:0},constructor:function(a){null!=a&&(this.capacity=a.capacity)},set:function(a,b){var c;if(this.nodeEntries.hasOwnProperty(a)){var d=this.nodeEntries[a];d.value=b,this._moveNodeToHead(d)}else this.capacity===this.currentNodeCount&&this._evictLRUNode(),c=this._createNode(a,b),this._moveNodeToHead(c),this.nodeEntries[a]=c,this.currentNodeCount++},get:function(a){if(!this.nodeEntries.hasOwnProperty(a))return null;var b=this.nodeEntries[a];return this._moveNodeToHead(b),b.value},_createNode:function(a,b){var c=FP.create("FP.LRUCache.Node");return c.setKey(a),c.setValue(b),c},_moveNodeToHead:function(a){return null===this.head?(this.head=a,void(this.tail=a)):(null!==a.previous&&(a.previous.next=a.next),null!==a.next&&(a.next.previous=a.previous),this.tail===a&&(this.tail=a.previous),a.next=this.head,this.head.previous=a,this.head=a,void(a.previous=null))},_evictLRUNode:function(){var a=this.tail;this.tail=this.tail.previous,delete this.nodeEntries[a.key],this.tail.next=null,a=null,this.currentNodeCount--}}),FP.define("FP.EventEmitter",{config:{_events:{}},constructor:function(){this._events=Object.create(null)},on:function(a,b){if(!a)throw TypeError("key cannot be null or empty");if("function"!=typeof b)throw TypeError("handler must be a function");var c=this._events[a];return c?c.push(b):this._events[a]=[b],this},emit:function(a){if(!a)throw TypeError("key cannot be null or empty");var b=this._events[a];if(!b)return this;for(var c=b.length,d=0;d<c;d++)b[d].apply(this,[].slice.call(arguments,1));return this},removeListeners:function(a,b){if(!a)throw TypeError("key cannot be null or empty");if("function"!=typeof b)throw TypeError("handler must be a function");var c=this._events[a];if(!c)return this;var d=c.findIndex(function(a){return a===b});return d===-1?this:(c.splice(d,1),this)},listenersCount:function(a){if(!a)throw TypeError("key cannot be null or empty");var b=this._events[a];return b?b.length:-1}}),Object.freeze&&Object.freeze(FP)}(FP);